---
import Layout from "../../../layouts/Layout.astro";
import BlogPost from "../../../components/blog/BlogPost.astro";
import { blogPosts, getPostById } from "../../../data/blog";
import { getLangFromUrl, useTranslations } from "../../../i18n/utils";

export function getStaticPaths() {
    return blogPosts
        .filter(post => post.lang === 'en')
        .map((post) => ({
            params: { id: post.id },
        }));
}

const { id } = Astro.params;
const lang = getLangFromUrl(Astro.url);
const post = id ? getPostById(id) : undefined;

if (!post) {
    return Astro.redirect("/404");
}

const pageTitle = `${post.title} - Bucko's Blog`;
---

<Layout title={pageTitle} description={post.excerpt}>
    <main class="post-page">
        <BlogPost post={post} />
    </main>
</Layout>

<style>
    .post-page {
        background-color: var(--color-bg);
        padding: var(--spacing-4xl) 0;
        min-height: 100vh;
    }

    @media (max-width: var(--breakpoint-md)) {
        .post-page {
            padding: 0;
        }
    }
</style>
